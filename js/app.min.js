"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};Function.prototype.$asyncbind=function a(b,c){"use strict";function d(){return e.apply(b,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:a,enumerable:!1,configurable:!0,writable:!0}),a.trampoline||(a.trampoline=function(a,b,c,d,e){return function f(g){for(;g;){if(g.then)return g=g.then(f,d),e?void 0:g;try{if(g.pop){if(g.length)return g.pop()?b.call(a):g;g=c}else g=g.call(a)}catch(a){return d(a)}}}}),a.LazyThenable||(a.LazyThenable=function(){function a(a){return a&&a instanceof Object&&"function"==typeof a.then}function b(c,d,e){try{var f=e?e(d):d;if(c===f)return c.reject(new TypeError("Promise resolution loop"));a(f)?f.then(function(a){b(c,a)},function(a){c.reject(a)}):c.resolve(f)}catch(a){c.reject(a)}}function c(){}function d(){}function e(c,e){var f=new d;try{this._resolver(function(d){return a(d)?d.then(c,e):b(f,d,c)},function(a){b(f,a,e)})}catch(a){b(f,a,e)}return f}function f(a){this._resolver=a,this.then=e}return d.prototype={resolve:c,reject:c,then:function(a,b){this.resolve=a,this.reject=b}},f.resolve=function(a){return f.isThenable(a)?a:{then:function(b){return b(a)}}},f.isThenable=a,f}(),a.EagerThenable=a.Thenable=(a.EagerThenableFactory=function(a){function b(a){if(a){var b=this;a(function(a){b.resolve(a)},function(a){b.reject(a)})}}function c(a,b){if("function"==typeof a.y)try{var c=a.y.call(void 0,b);a.p.resolve(c)}catch(b){a.p.reject(b)}else a.p.resolve(b)}function d(a,b){if("function"==typeof a.n)try{var c=a.n.call(void 0,b);a.p.resolve(c)}catch(b){a.p.reject(b)}else a.p.reject(b)}a=a||"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,0)};var e=function(){function b(){for(;c.length-d;){try{c[d]()}catch(a){}c[d++]=void 0,d===e&&(c.splice(0,e),d=0)}}var c=[],d=0,e=1024;return function(e){c.push(e),1==c.length-d&&a(b)}}();return b.prototype={resolve:function(a){if(void 0===this.state){if(a===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var b=this;if(a&&("function"==typeof a||"object"===("undefined"==typeof a?"undefined":_typeof(a))))try{var d=0,f=a.then;if("function"==typeof f)return void f.call(a,function(a){d++||b.resolve(a)},function(a){d++||b.reject(a)})}catch(a){return void(d||this.reject(a))}this.state=c,this.v=a,b.c&&e(function(){for(var d=0,e=b.c.length;d<e;d++)c(b.c[d],a)})}},reject:function(a){if(void 0===this.state){this.state=d,this.v=a;var b=this.c;b&&e(function(){for(var c=0,e=b.length;c<e;c++)d(b[c],a)})}},then:function(c,d){var f=new b,g={y:c,n:d,p:f};if(void 0===this.state)this.c?this.c.push(g):this.c=[g];else{var h=this.state,i=this.v;e(function(){h(g,i)})}return f}},b.resolve=function(a){if(a&&a instanceof b)return a;var c=new b;return c.resolve(a),c},b.reject=function(a){if(a&&a instanceof b)return a;var c=new b;return c.reject(a),c},b.version="2.3.3-nodent",b})());var e=this;return!0===c?new a.Thenable(d):0===c?new a.LazyThenable(d):void 0===c?(d.then=d,d):function(){try{return e.apply(b,arguments)}catch(a){return c(a)}}};function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}var App={web3:null,web3Provider:null,etherscanLink:"",metamask:{installed:!1,netId:null},artifacts:{},contracts:{},setTestnet:function(){web3Provider=rinkeby_web3Provider,etherscanLink=rinkeby_etherscanLink,networkId=rinkeby_networkId,networkName=rinkeby_networkName},init:function(){App.initWeb3(!0)},initWeb3:function(a){App.etherscanLink=etherscanLink,a&&"undefined"!=typeof web3?(App.web3Provider=web3.currentProvider,App.web3=new Web3(App.web3Provider),App.metamask.installed=!0,App.web3.version.getNetwork(function(a,b){App.metamask.netId=b,b!==networkId&&App.initWeb3(!1)})):(App.web3Provider=new Web3.providers.HttpProvider(web3Provider),App.web3=new Web3(App.web3Provider))},initToken:function(){var a=_asyncToGenerator(function*(){return $.getJSON(abiPath+"ERC20Token.json",function(a){App.artifacts.ERC20Token=a,App.contracts.ERC20Token=App.web3.eth.contract(App.artifacts.ERC20Token.abi)})});return function(){return a.apply(this,arguments)}}(),builder:function(){var a=_asyncToGenerator(function*(){App.init(),Vue.use(VeeValidate),yield App.initToken(),new Vue({el:"#token-generator",data:{testnet:"1"!==networkId,networkName:networkName,hasMetaMask:App.metamask.installed,trxHash:"",makingTransaction:!1,formDisabled:!1,token:{stringifiedAbi:JSON.stringify(App.contracts.ERC20Token.abi)}},created:function(){this.$validator.extend("eth_address",{getMessage:function(){return"Insert a valid Ethereum wallet address."},validate:function(a){return App.web3.isAddress(a)}})},methods:{generateToken:function(){var a=this;return App.metamask.installed?App.metamask.netId===networkId?void this.$validator.validateAll().then(function(){var b=_asyncToGenerator(function*(b){if(b){var c=a.token.name,d=a.token.symbol.toUpperCase(),e=new App.web3.BigNumber(a.token.decimals);try{a.trxHash="",a.formDisabled=!0,a.makingTransaction=!0,App.contracts.ERC20Token.new(c,d,e,{from:App.web3.eth.coinbase,data:App.artifacts.ERC20Token.bytecode},function(b,c){c.address?(a.token.address=c.address,a.token.link=App.etherscanLink+"/token/"+a.token.address,a.$forceUpdate()):(a.trxHash=c.transactionHash,a.trxLink=App.etherscanLink+"/tx/"+a.trxHash)})}catch(b){a.makingTransaction=!1,a.formDisabled=!1,alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!")}}else console.log("some errors")});return function(){return b.apply(this,arguments)}}()):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To create a Token please install the MetaMask extension!")}}})});return function(){return a.apply(this,arguments)}}()};(function(){"rinkeby"===page?(App.setTestnet(),App.builder()):""===page?App.builder():void 0})(jQuery);